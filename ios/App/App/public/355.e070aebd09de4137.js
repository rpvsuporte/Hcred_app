"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[355],{355:(q,h,d)=>{d.r(h),d.d(h,{AtuarPropostaPageModule:()=>z});var g=d(2881),m=d(4341),c=d(9420),x=d(5207),p=d(467),f=d(7691),u=d(6480),C=d(4843),o=d(1360),b=d(3366),M=d(9260),j=d(7643);function F(i,s){if(1&i){const n=o.RV6();o.j41(0,"div",16)(1,"ion-button",17),o.bIt("click",function(){o.eBV(n);const e=o.XpG(2);return o.Njj(e.atuar())}),o.EFF(2,"Atuar na Proposta"),o.k0s()()}}function A(i,s){if(1&i&&(o.j41(0,"div",18)(1,"p",19),o.EFF(2," Proposta sendo atuada por "),o.j41(3,"strong"),o.EFF(4),o.nI1(5,"uppercase"),o.k0s(),o.EFF(6),o.nI1(7,"date"),o.k0s()()),2&i){const n=o.XpG(2);o.R7$(4),o.SpI("",o.bMT(5,2,n.msgAtuacao.nomeUsuario),","),o.R7$(2),o.SpI(" expira em ",o.i5U(7,4,n.msgAtuacao.expire,"dd/MM/yyyy HH:mm")," ")}}function k(i,s){if(1&i){const n=o.RV6();o.j41(0,"ion-button",17),o.bIt("click",function(){o.eBV(n);const e=o.XpG(3);return o.Njj(e.abrirCameraOuGaleria())}),o.nrm(1,"ion-icon",27),o.EFF(2," Anexar Foto "),o.k0s()}}function I(i,s){if(1&i){const n=o.RV6();o.j41(0,"p"),o.EFF(1),o.j41(2,"ion-icon",28),o.bIt("click",function(){o.eBV(n);const e=o.XpG(3);return o.Njj(e.limparAnexo())}),o.k0s()()}if(2&i){const n=o.XpG(3);o.R7$(),o.SpI(" ",n.nomeArquivoAnexado," ")}}function R(i,s){if(1&i&&(o.j41(0,"ion-select-option"),o.EFF(1),o.k0s()),2&i){const n=s.$implicit;o.R7$(),o.JRh(n)}}function T(i,s){if(1&i){const n=o.RV6();o.j41(0,"div",20)(1,"div",21),o.DNE(2,k,3,0,"ion-button",22)(3,I,3,1,"p",3),o.k0s(),o.j41(4,"ion-item",23)(5,"ion-select",24),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(2);return o.DH7(a.opcaoSelecionada,e)||(a.opcaoSelecionada=e),o.Njj(e)}),o.DNE(6,R,2,1,"ion-select-option",25),o.k0s()(),o.j41(7,"div",26)(8,"ion-button",17),o.bIt("click",function(){o.eBV(n);const e=o.XpG(2);return o.Njj(e.salvarAnexo())}),o.EFF(9,"Salvar"),o.k0s(),o.j41(10,"ion-button",17),o.bIt("click",function(){o.eBV(n);const e=o.XpG(2);return o.Njj(e.abrirModal())}),o.EFF(11,"Dados Banc\xe1rios"),o.k0s()()()}if(2&i){const n=o.XpG(2);o.R7$(2),o.Y8G("ngIf",!n.arquivoSelecionado),o.R7$(),o.Y8G("ngIf",n.arquivoSelecionado),o.R7$(2),o.R50("ngModel",n.opcaoSelecionada),o.R7$(),o.Y8G("ngForOf",n.tiposAnexo)}}function E(i,s){if(1&i){const n=o.RV6();o.qex(0),o.j41(1,"p",31)(2,"ion-icon",32),o.bIt("click",function(){o.eBV(n);const e=o.XpG().$implicit,a=o.XpG(2);return o.Njj(a.abrirAnexo(e.anexo))}),o.k0s()(),o.bVm()}}function B(i,s){if(1&i&&(o.j41(0,"ion-card",29)(1,"ion-card-content")(2,"p"),o.EFF(3),o.k0s(),o.nrm(4,"p",30),o.j41(5,"p"),o.EFF(6),o.k0s(),o.DNE(7,E,3,0,"ng-container",3),o.k0s()()),2&i){const n=s.$implicit,t=o.XpG(2);o.R7$(3),o.JRh(n.data),o.R7$(),o.Y8G("innerHTML",t.formatarObservacoes(n.observacoes),o.npT),o.R7$(2),o.JRh(n.operador),o.R7$(),o.Y8G("ngIf",n.anexo)}}function O(i,s){if(1&i){const n=o.RV6();o.qex(0),o.j41(1,"ion-select",43),o.bIt("ionChange",function(){o.eBV(n);const e=o.XpG(3);return o.Njj(e.dadosPix.chave="")}),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(3);return o.DH7(a.dadosPix.tipoChave,e)||(a.dadosPix.tipoChave=e),o.Njj(e)}),o.j41(2,"ion-select-option",44),o.EFF(3,"CPF"),o.k0s(),o.j41(4,"ion-select-option",45),o.EFF(5,"CNPJ"),o.k0s(),o.j41(6,"ion-select-option",46),o.EFF(7,"E-mail"),o.k0s(),o.j41(8,"ion-select-option",47),o.EFF(9,"Telefone"),o.k0s(),o.j41(10,"ion-select-option",48),o.EFF(11,"Chave Aleat\xf3ria"),o.k0s()(),o.j41(12,"ion-input",49),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(3);return o.DH7(a.dadosPix.chave,e)||(a.dadosPix.chave=e),o.Njj(e)}),o.bIt("ionInput",function(e){o.eBV(n);const a=o.XpG(3);return o.Njj(a.formatarChavePix(e))})("ionBlur",function(){o.eBV(n);const e=o.XpG(3);return o.Njj(e.validarChavePix())}),o.k0s(),o.bVm()}if(2&i){const n=o.XpG(3);o.R7$(),o.R50("ngModel",n.dadosPix.tipoChave),o.R7$(11),o.AVh("borda-vermelha-input",!n.chavePixValida&&n.dadosPix.chave.length>0),o.R50("ngModel",n.dadosPix.chave),o.BMQ("maxlength",n.maxLength)}}function V(i,s){if(1&i){const n=o.RV6();o.j41(0,"div",60),o.bIt("mousedown",function(){const e=o.eBV(n).$implicit,a=o.XpG(5);return o.Njj(a.selecionarBancoInput(e))}),o.EFF(1),o.k0s()}if(2&i){const n=s.$implicit;o.R7$(),o.SpI(" ","-"===n.Code?n.Name:n.Name+" - "+n.Code," ")}}function y(i,s){if(1&i&&(o.j41(0,"div",58),o.DNE(1,V,2,1,"div",59),o.k0s()),2&i){const n=o.XpG(4);o.R7$(),o.Y8G("ngForOf",n.bancosFiltrados)}}function G(i,s){if(1&i){const n=o.RV6();o.qex(0),o.j41(1,"ion-input",50),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(3);return o.DH7(a.dadosBanco.banco,e)||(a.dadosBanco.banco=e),o.Njj(e)}),o.bIt("ionInput",function(){o.eBV(n);const e=o.XpG(3);return o.Njj(e.filtrarBancos())})("ionFocus",function(){o.eBV(n);const e=o.XpG(3);return o.Njj(e.mostrarListaBancos=!0)})("blur",function(){o.eBV(n);const e=o.XpG(3);return o.Njj(e.ocultarComDelay())}),o.k0s(),o.DNE(2,y,2,1,"div",51),o.j41(3,"ion-input",52),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(3);return o.DH7(a.dadosBanco.agencia,e)||(a.dadosBanco.agencia=e),o.Njj(e)}),o.k0s(),o.j41(4,"ion-input",53),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(3);return o.DH7(a.dadosBanco.conta,e)||(a.dadosBanco.conta=e),o.Njj(e)}),o.k0s(),o.j41(5,"ion-input",54),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(3);return o.DH7(a.dadosBanco.digito,e)||(a.dadosBanco.digito=e),o.Njj(e)}),o.k0s(),o.j41(6,"ion-select",55),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(3);return o.DH7(a.dadosBanco.tipoConta,e)||(a.dadosBanco.tipoConta=e),o.Njj(e)}),o.j41(7,"ion-select-option",56),o.EFF(8,"Corrente"),o.k0s(),o.j41(9,"ion-select-option",57),o.EFF(10,"Poupan\xe7a"),o.k0s()(),o.bVm()}if(2&i){const n=o.XpG(3);o.R7$(),o.R50("ngModel",n.dadosBanco.banco),o.R7$(),o.Y8G("ngIf",n.mostrarListaBancos&&n.bancosFiltrados.length),o.R7$(),o.R50("ngModel",n.dadosBanco.agencia),o.R7$(),o.R50("ngModel",n.dadosBanco.conta),o.R7$(),o.R50("ngModel",n.dadosBanco.digito),o.R7$(),o.R50("ngModel",n.dadosBanco.tipoConta)}}function N(i,s){if(1&i){const n=o.RV6();o.j41(0,"ion-input",74),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(5);return o.DH7(a.terceiroPF.parentescoOutros,e)||(a.terceiroPF.parentescoOutros=e),o.Njj(e)}),o.k0s()}if(2&i){const n=o.XpG(5);o.R50("ngModel",n.terceiroPF.parentescoOutros)}}function S(i,s){if(1&i){const n=o.RV6();o.qex(0),o.j41(1,"ion-input",64),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(4);return o.DH7(a.terceiroPF.nome,e)||(a.terceiroPF.nome=e),o.Njj(e)}),o.k0s(),o.j41(2,"ion-input",65),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(4);return o.DH7(a.terceiroPF.cpf,e)||(a.terceiroPF.cpf=e),o.Njj(e)}),o.bIt("ionInput",function(e){o.eBV(n);const a=o.XpG(4);return o.Njj(a.formatarCPF(e))}),o.k0s(),o.j41(3,"ion-select",66),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(4);return o.DH7(a.terceiroPF.parentesco,e)||(a.terceiroPF.parentesco=e),o.Njj(e)}),o.j41(4,"ion-select-option",67),o.EFF(5,"Pai/M\xe3e"),o.k0s(),o.j41(6,"ion-select-option",68),o.EFF(7,"Av\xf3/Av\xf4"),o.k0s(),o.j41(8,"ion-select-option",69),o.EFF(9,"Filho"),o.k0s(),o.j41(10,"ion-select-option",70),o.EFF(11,"Irm\xe3os"),o.k0s(),o.j41(12,"ion-select-option",71),o.EFF(13,"C\xf4njuge"),o.k0s(),o.j41(14,"ion-select-option",72),o.EFF(15,"Outros"),o.k0s()(),o.DNE(16,N,1,1,"ion-input",73),o.bVm()}if(2&i){const n=o.XpG(4);o.R7$(),o.R50("ngModel",n.terceiroPF.nome),o.R7$(),o.AVh("borda-vermelha-input",!n.cpfValidoTerceiro&&n.terceiroPF.cpf.length>0),o.R50("ngModel",n.terceiroPF.cpf),o.R7$(),o.R50("ngModel",n.terceiroPF.parentesco),o.R7$(13),o.Y8G("ngIf","outros"===n.terceiroPF.parentesco)}}function $(i,s){if(1&i){const n=o.RV6();o.qex(0),o.j41(1,"ion-input",75),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(4);return o.DH7(a.terceiroPJ.razaoSocial,e)||(a.terceiroPJ.razaoSocial=e),o.Njj(e)}),o.k0s(),o.j41(2,"ion-input",76),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(4);return o.DH7(a.terceiroPJ.cnpj,e)||(a.terceiroPJ.cnpj=e),o.Njj(e)}),o.bIt("ionInput",function(e){o.eBV(n);const a=o.XpG(4);return o.Njj(a.formatarCNPJ(e))})("ionBlur",function(){o.eBV(n);const e=o.XpG(4);return o.Njj(e.validarCNPJInput())}),o.k0s(),o.j41(3,"ion-input",77),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(4);return o.DH7(a.terceiroPJ.vinculo,e)||(a.terceiroPJ.vinculo=e),o.Njj(e)}),o.k0s(),o.bVm()}if(2&i){const n=o.XpG(4);o.R7$(),o.R50("ngModel",n.terceiroPJ.razaoSocial),o.R7$(),o.AVh("borda-vermelha-input",!n.cnpjValidoTerceiro&&n.terceiroPJ.cnpj.length>0),o.R50("ngModel",n.terceiroPJ.cnpj),o.R7$(),o.R50("ngModel",n.terceiroPJ.vinculo)}}function D(i,s){if(1&i){const n=o.RV6();o.qex(0),o.j41(1,"ion-radio-group",61),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(3);return o.DH7(a.tipoTerceiro,e)||(a.tipoTerceiro=e),o.Njj(e)}),o.j41(2,"ion-item",23)(3,"ion-label"),o.EFF(4,"Pessoa F\xedsica"),o.k0s(),o.nrm(5,"ion-radio",62),o.k0s(),o.j41(6,"ion-item",23)(7,"ion-label"),o.EFF(8,"Pessoa Jur\xeddica"),o.k0s(),o.nrm(9,"ion-radio",63),o.k0s()(),o.DNE(10,S,17,6,"ng-container",3)(11,$,4,5,"ng-container",3),o.bVm()}if(2&i){const n=o.XpG(3);o.R7$(),o.R50("ngModel",n.tipoTerceiro),o.R7$(9),o.Y8G("ngIf","pf"===n.tipoTerceiro),o.R7$(),o.Y8G("ngIf","pj"===n.tipoTerceiro)}}function X(i,s){if(1&i){const n=o.RV6();o.j41(0,"div",33)(1,"div",34)(2,"div",35)(3,"ion-icon",36),o.bIt("click",function(){o.eBV(n);const e=o.XpG(2);return o.Njj(e.fecharModal())}),o.k0s()(),o.j41(4,"h2",37),o.EFF(5,"Dados Banc\xe1rios"),o.k0s(),o.j41(6,"ion-select",38),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(2);return o.DH7(a.tipoRecebimento,e)||(a.tipoRecebimento=e),o.Njj(e)}),o.bIt("ionChange",function(){o.eBV(n);const e=o.XpG(2);return o.Njj(e.onTipoRecebimentoChange())}),o.j41(7,"ion-select-option",39),o.EFF(8,"Chave PIX"),o.k0s(),o.j41(9,"ion-select-option",40),o.EFF(10,"Banco"),o.k0s()(),o.DNE(11,O,13,5,"ng-container",3)(12,G,11,6,"ng-container",3),o.j41(13,"ion-toggle",41),o.mxI("ngModelChange",function(e){o.eBV(n);const a=o.XpG(2);return o.DH7(a.liberacaoContaTerceiros,e)||(a.liberacaoContaTerceiros=e),o.Njj(e)}),o.EFF(14,"Libera\xe7\xe3o em conta de terceiros"),o.k0s(),o.DNE(15,D,12,3,"ng-container",3),o.j41(16,"ion-button",42),o.bIt("click",function(){o.eBV(n);const e=o.XpG(2);return o.Njj(e.salvarDados())}),o.EFF(17,"Alterar Dados"),o.k0s()()()}if(2&i){const n=o.XpG(2);o.R7$(6),o.R50("ngModel",n.tipoRecebimento),o.R7$(5),o.Y8G("ngIf","pix"===n.tipoRecebimento),o.R7$(),o.Y8G("ngIf","banco"===n.tipoRecebimento),o.R7$(),o.R50("ngModel",n.liberacaoContaTerceiros),o.R7$(2),o.Y8G("ngIf",n.liberacaoContaTerceiros)}}function w(i,s){if(1&i){const n=o.RV6();o.j41(0,"main")(1,"div",4)(2,"ion-card",5)(3,"ion-card-header")(4,"ion-card-title",6),o.EFF(5,"Dados da Proposta"),o.k0s()(),o.j41(6,"ion-card-content")(7,"p")(8,"strong"),o.EFF(9,"ID Proposta:"),o.k0s(),o.EFF(10),o.k0s(),o.j41(11,"p")(12,"strong"),o.EFF(13,"Status:"),o.k0s(),o.EFF(14),o.k0s(),o.j41(15,"p")(16,"strong"),o.EFF(17,"Tipo:"),o.k0s(),o.EFF(18),o.k0s(),o.j41(19,"p")(20,"strong"),o.EFF(21,"Valor Financiado:"),o.k0s(),o.EFF(22),o.k0s(),o.j41(23,"p")(24,"strong"),o.EFF(25,"Parcelas:"),o.k0s(),o.EFF(26),o.k0s(),o.j41(27,"p")(28,"strong"),o.EFF(29,"Valor Total:"),o.k0s(),o.EFF(30),o.k0s()()(),o.j41(31,"ion-card",5)(32,"ion-card-header")(33,"ion-card-title",6),o.EFF(34,"Dados do Cliente"),o.k0s()(),o.j41(35,"ion-card-content")(36,"p")(37,"strong"),o.EFF(38,"Nome:"),o.k0s(),o.EFF(39),o.k0s(),o.j41(40,"p")(41,"strong"),o.EFF(42,"CPF:"),o.k0s(),o.EFF(43),o.k0s(),o.j41(44,"p")(45,"strong"),o.EFF(46,"Telefone:"),o.k0s(),o.EFF(47),o.k0s(),o.j41(48,"p")(49,"strong"),o.EFF(50,"Email:"),o.k0s(),o.EFF(51),o.k0s()()()(),o.j41(52,"div",7)(53,"ion-button",8),o.bIt("click",function(){o.eBV(n);const e=o.XpG();return o.Njj(e.navigation("propostas/contrato"))}),o.EFF(54,"Visualizar Proposta"),o.k0s(),o.j41(55,"ion-button",9),o.bIt("click",function(){o.eBV(n);const e=o.XpG();return o.Njj(e.fecharProposta("back"))}),o.EFF(56,"Fechar Proposta"),o.k0s()(),o.DNE(57,F,3,0,"div",10)(58,A,8,7,"div",11)(59,T,12,4,"div",12),o.j41(60,"div",13),o.DNE(61,B,8,4,"ion-card",14),o.k0s(),o.DNE(62,X,18,5,"div",15),o.k0s()}if(2&i){const n=o.XpG();o.R7$(10),o.SpI(" ",n.prop.idProposta,""),o.R7$(4),o.SpI(" ",n.status,""),o.R7$(4),o.SpI(" ",n.prop.tipo,""),o.R7$(4),o.SpI(" R$ ",n.prop.valorFinanciado,""),o.R7$(4),o.SpI(" ",n.prop.quantPrestacoes,"x"),o.R7$(4),o.SpI(" R$ ",n.prop.valorTotal,""),o.R7$(9),o.SpI(" ",n.prop.nome,""),o.R7$(4),o.SpI(" ",n.prop.cpf,""),o.R7$(4),o.SpI(" ",n.prop.celular,""),o.R7$(4),o.SpI(" ",n.prop.email,""),o.R7$(6),o.Y8G("ngIf",!n.mostrarAtuacao&&"sendo atuada por outro"!==n.statusAtuacao),o.R7$(),o.Y8G("ngIf","sendo atuada por outro"===n.statusAtuacao),o.R7$(),o.Y8G("ngIf",n.mostrarAtuacao),o.R7$(2),o.Y8G("ngForOf",n.propsStatus),o.R7$(),o.Y8G("ngIf",n.mostrarModal)}}const L=[{path:"",component:(()=>{var i;class s{constructor(t,e,a,r,l){this.alertController=t,this.apiService=e,this.navigationService=a,this.loadingController=r,this.http=l,this.prop={},this.propsStatus=[],this.mostrarAtuacao=!1,this.opcaoSelecionada="",this.arquivoSelecionado=null,this.exibirModalQRCode=!1,this.urlQRCode="",this.linkQRCode="",this.statusAtuacao="",this.msgAtuacao={},this.nomeArquivoAnexado="",this.mostrarModal=!1,this.liberacaoContaTerceiros=!1,this.listaBanks=[],this.bancosFiltrados=[],this.termoBuscaBanco="",this.mostrarListaBancos=!1,this.maxLength=14,this.chavePixValida=!0,this.tipoRecebimento="",this.tipoTerceiro=null,this.cpfValidoTerceiro=!0,this.cnpjValidoTerceiro=!0,this.dadosPix={tipoChave:"cpf",chave:""},this.dadosBanco={banco:"",agencia:"",conta:"",digito:"",tipoConta:"corrente"},this.terceiroPJ={razaoSocial:"",cnpj:"",vinculo:""},this.terceiroPF={nome:"",cpf:"",parentesco:"",parentescoOutros:""},this.tiposAnexo=["Link enviado para o cliente.","Altera\xe7\xe3o cadastral - Telefone.","An\xe1lise de Risco.","Capta\xe7\xe3o Externa (Cliente Novo).","CNH","Comprovante de Conta Banc\xe1ria.","Comprovante de Estorno.","Comprovante M\xe1quina.","Comprovante Parentesco (Conta Terceiro).","Contato realizado com o Banco Emissor.","Contrato assinado.","CPF","Dados de Pagamento Conferidos.","Entrar em contato com o cliente novamente.","Enviar Contrato Online.","Espelho","Extratos banc\xe1rios 3 \xfaltimos meses.","Foto cart\xe3o frente.","Foto cart\xe3o verso.","Fun\xe7\xe3o 15 realizada.","Link Preenchido.","Print App Cart\xe3o.","RG","Selfie segurando cart\xe3o.","Solicito Cancelamento."],this.titles={nova:"Novas","em analise":"Em An\xe1lise",pendentes:"Pendentes",negociacoes:"Negocia\xe7\xf5es","link enviado":"Link Enviado",assinatura:"Assinatura",aprovadas:"Aprovadas",pagamentos:"Pagamentos",devolvidas:"Devolvidas",pagas:"Pagas",finalizadas:"Finalizadas",reprovada:"Reprovadas",canceladas:"Canceladas",contestacao:"Contesta\xe7\xe3o"}}ngOnInit(){this.selectBanks()}ionViewWillEnter(){this.consultarProps(),this.verificaAtuacao()}selectBanks(){var t=this;return(0,p.A)(function*(){t.apiService.buscaBanks({auth_hash:u.k}).subscribe({next:e=>{"erro"===e.estatus?console.log(e.mensagem):(t.listaBanks=e.resultado,t.filtrarBancos())},error:()=>{console.log("Erro na conex\xe3o.")}})})()}filtrarBancos(){const t=this.termoBuscaBanco.toLowerCase();this.bancosFiltrados=this.listaBanks.filter(e=>e.Name.toLowerCase().includes(t))}selecionarBancoInput(t){this.termoBuscaBanco=t.Name,this.mostrarListaBancos=!1,this.dadosBanco.banco=t.Name}ocultarComDelay(){setTimeout(()=>this.mostrarListaBancos=!1,200)}get status(){return(this.prop.estatus||"").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}abrirCameraOuGaleria(){var t=this;return(0,p.A)(function*(){var e;if(null!==(e=window.Capacitor)&&void 0!==e&&e.isNativePlatform())try{const a=yield f.i7.getPhoto({quality:80,allowEditing:!1,resultType:f.LK.DataUrl,source:f.ru.Prompt}),r=t.base64ToFile(a.dataUrl,"anexo.jpg");t.arquivoSelecionado=r,t.nomeArquivoAnexado=r.name,console.log("Arquivo capturado pelo Capacitor no celular:",r)}catch(a){console.warn("Captura cancelada ou erro:",a)}else try{const r=yield(yield fetch("https://picsum.photos/400")).blob(),l=new File([r],"simulado.jpg",{type:r.type});t.arquivoSelecionado=l,t.nomeArquivoAnexado=l.name,console.log("Arquivo SIMULADO no navegador:",l)}catch(a){console.error("Erro ao carregar imagem simulada:",a)}})()}base64ToFile(t,e){const a=t.split(","),r=a[0].match(/:(.*?);/)[1],l=atob(a[1]);let _=l.length;const P=new Uint8Array(_);for(;_--;)P[_]=l.charCodeAt(_);return new File([P],e,{type:r})}limparAnexo(){this.arquivoSelecionado=null,this.nomeArquivoAnexado=""}formatarChavePix(t){const e=this.dadosPix.tipoChave;let a=t.target.value.replace(/\D/g,"");"cpf"===e?(a=a.substring(0,11),this.maxLength=14,this.dadosPix.chave=a.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2")):"cnpj"===e?(a=a.substring(0,14),this.maxLength=18,this.dadosPix.chave=a.replace(/^(\d{2})(\d)/,"$1.$2").replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3").replace(/\.(\d{3})(\d)/,".$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1-$2")):"telefone"===e?(a=a.substring(0,11),this.maxLength=15,this.dadosPix.chave=a.replace(/^(\d{2})(\d)/,"($1) $2").replace(/(\d{5})(\d{1,4})$/,"$1-$2")):(this.maxLength=200,this.dadosPix.chave=t.target.value),this.chavePixValida=this.validarChavePix()}formatarCPF(t){let e=t.target.value.replace(/\D/g,"").substring(0,11);e=e.replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2"),this.terceiroPF.cpf=e,this.validarCPFInput()}formatarCNPJ(t){let e=t.target.value.replace(/\D/g,"").substring(0,14);e=e.replace(/^(\d{2})(\d)/,"$1.$2").replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3").replace(/\.(\d{3})(\d)/,".$1/$2").replace(/(\d{4})(\d{1,2})$/,"$1-$2"),this.terceiroPJ.cnpj=e,this.validarCNPJInput()}validarCPFInput(){const t=this.terceiroPF.cpf.replace(/\D/g,"");this.cpfValidoTerceiro=this.validarCPF(t)}validarCNPJInput(){const t=this.terceiroPJ.cnpj.replace(/\D/g,"");this.cnpjValidoTerceiro=this.validarCNPJ(t)}validarChavePix(){const t=this.dadosPix.chave.replace(/\D/g,""),e=this.dadosPix.tipoChave;return"cpf"===e?this.validarCPF(t):"cnpj"===e?this.validarCNPJ(t):"telefone"===e?/^\d{11}$/.test(t):"email"===e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.dadosPix.chave.trim()):"aleatoria"===e&&/^[0-9a-f-]{32,36}$/i.test(this.dadosPix.chave.replace(/\s/g,""))}validarCPF(t){if(11!==t.length||/^(\d)\1+$/.test(t))return!1;let e=0;for(let r=0;r<9;r++)e+=+t[r]*(10-r);let a=10*e%11;if(10===a&&(a=0),a!==+t[9])return!1;e=0;for(let r=0;r<10;r++)e+=+t[r]*(11-r);return a=10*e%11,10===a&&(a=0),a===+t[10]}validarCNPJ(t){if(14!==t.length||/^(\d)\1+$/.test(t))return!1;const e=(l,_)=>{const v=l.slice(0,_.length).split("").reduce((U,Y,H)=>U+ +Y*_[H],0)%11;return(v<2?0:11-v)==+l[_.length]};return e(t,[5,4,3,2,9,8,7,6,5,4,3,2])&&e(t,[6,5,4,3,2,9,8,7,6,5,4,3,2])}limparPix(){this.dadosPix.chave=""}consultarProps(){var t=this;return(0,p.A)(function*(){const e=yield t.loadingController.create({message:"Carregando informa\xe7\xf5es...",spinner:"crescent",backdropDismiss:!1});yield e.present();const a={auth_hash:u.k,idProposta:localStorage.getItem("idProposta"),idUser:localStorage.getItem("idLogado")};t.apiService.buscaPropsStatus(a).subscribe({next:r=>{e.dismiss(),"erro"===r.estatus?t.alert(r.mensagem):(t.prop=r.resultadoProp,t.propsStatus=r.resultadoPropsStatus)},error:()=>{e.dismiss(),alert("Erro na conex\xe3o.")}})})()}verificaAtuacao(){const t={auth_hash:u.k,idProposta:localStorage.getItem("idProposta"),idUser:localStorage.getItem("idLogado")};this.apiService.verificarPropsView(t).subscribe({next:e=>{"erro"===e.estatus?this.alert(e.mensagem):(this.statusAtuacao=e.estatus,"sendo atuada por outro"===this.statusAtuacao&&(this.msgAtuacao=e.result),"sendo atuada por voc\xea"===this.statusAtuacao&&(this.mostrarAtuacao=!0))},error:()=>{alert("Erro na conex\xe3o.")}})}fecharProposta(t){const e={auth_hash:u.k,idProposta:localStorage.getItem("idProposta")};this.apiService.deletePropsView(e).subscribe({next:a=>{"erro"===a.estatus?this.alert(a.mensagem):(this.mostrarAtuacao=!1,"back"===t&&this.navigation("propostas"))},error:()=>{this.alert("Erro na conex\xe3o.")}})}atuar(){const t={auth_hash:u.k,idProposta:localStorage.getItem("idProposta"),idUser:localStorage.getItem("idLogado")};this.apiService.cadPropsView(t).subscribe({next:e=>{"erro"===e.estatus?this.alert(e.mensagem):this.mostrarAtuacao=!0},error:()=>{this.alert("Erro na conex\xe3o.")}})}salvarAnexo(){var t=this;return(0,p.A)(function*(){if(!t.arquivoSelecionado||!t.opcaoSelecionada)return void t.alert("Preencha o anexo e o tipo antes de salvar.");const e=yield t.loadingController.create({message:"Salvando anexo...",spinner:"dots"});yield e.present();const a=new FormData;a.append("arquivo",t.arquivoSelecionado),a.append("tipoAnexo",t.opcaoSelecionada),a.append("idProposta",localStorage.getItem("idProposta")||""),a.append("idUser",localStorage.getItem("idLogado")||""),a.append("nomeLogado",localStorage.getItem("nomeLogado")||""),a.append("auth_hash",u.k);try{yield(0,C._)(t.apiService.S3Upload(a)),yield e.dismiss(),t.alert("Anexo enviado com sucesso!"),t.limparAnexo(),t.fecharProposta("keep"),t.consultarProps()}catch(r){console.error(r),yield e.dismiss(),t.alert("Erro ao enviar o anexo.")}})()}onTipoRecebimentoChange(){this.dadosPix={tipoChave:"cpf",chave:""},this.dadosBanco={banco:"",agencia:"",conta:"",digito:"",tipoConta:"corrente"}}abrirModal(){this.mostrarModal=!0,document.body.classList.add("modal-open")}fecharModal(){this.mostrarModal=!1,document.body.classList.remove("modal-open")}salvarDados(){var t=this;return(0,p.A)(function*(){const e=yield t.loadingController.create({message:"Alterando dados...",spinner:"crescent",backdropDismiss:!1});yield e.present();const a={tipoRecebimento:t.tipoRecebimento,idProposta:localStorage.getItem("idProposta"),idUser:localStorage.getItem("idLogado"),nomeUsuario:localStorage.getItem("nomeLogado"),dados:{}};var r;"pix"===t.tipoRecebimento?(a.dados.tipoChave=t.dadosPix.tipoChave,a.dados.chavePix=t.dadosPix.chave):"banco"===t.tipoRecebimento&&(a.dados.banco=t.dadosBanco.banco,a.dados.ContaAgencia=t.dadosBanco.agencia,a.dados.ContaCorrente=t.dadosBanco.conta,a.dados.ContaDigito=t.dadosBanco.digito,a.dados.tipoConta=t.dadosBanco.tipoConta),t.liberacaoContaTerceiros&&(a.dados.terceiroConta=1,"pf"===t.tipoTerceiro?(a.dados.nomeTerceiro=t.terceiroPF.nome,a.dados.cpfTerceiro=t.terceiroPF.cpf,a.dados.parentesco=t.terceiroPF.parentesco,"outros"===t.terceiroPF.parentesco&&(a.dados.parentescoOutros=t.terceiroPF.parentescoOutros)):"pj"===t.tipoTerceiro&&(a.dados.nomeTerceiro=t.terceiroPJ.razaoSocial,a.dados.cpfTerceiro=t.terceiroPJ.cnpj,a.dados.parentesco=t.terceiroPJ.vinculo)),t.apiService.enviarDadosAlteracao({auth_hash:u.k,tipoRecebimento:a.tipoRecebimento,idProposta:a.idProposta,idUser:a.idUser,nomeUsuario:a.nomeUsuario,dados:a.dados}).subscribe({next:(r=(0,p.A)(function*(l){yield e.dismiss(),"erro"!==l.status?(console.log(l),t.mostrarModal=!1,t.fecharProposta("keep"),t.consultarProps()):t.alert("Erro ao salvar os dados.")}),function(_){return r.apply(this,arguments)}),error:function(){var r=(0,p.A)(function*(){yield e.dismiss(),t.alert("Erro ao enviar os dados.")});return function(){return r.apply(this,arguments)}}()})})()}navigation(t){this.navigationService.navigate(t)}formatarObservacoes(t){return t?t.replace(/ - /g,"<br>"):""}abrirAnexo(t){window.open(t,"_blank")}alert(t){var e=this;return(0,p.A)(function*(){yield(yield e.alertController.create({header:"AVISO",message:t,buttons:["OK"]})).present()})()}}return(i=s).\u0275fac=function(t){return new(t||i)(o.rXU(c.hG),o.rXU(b.G),o.rXU(M.o),o.rXU(c.Xi),o.rXU(j.Qq))},i.\u0275cmp=o.VBU({type:i,selectors:[["app-atuar-proposta"]],standalone:!1,decls:6,vars:3,consts:[[1,"pageView_propostas",3,"fullscreen","scrollY"],[1,"topo-view_propostas"],["name","chevron-back-outline",1,"icone-voltar",3,"click"],[4,"ngIf"],[1,"date-list"],[1,"proposta-card"],[2,"font-size","22px","font-weight","bold","color","#004977","text-align","center"],[1,"buttons-container"],[2,"--background","#004977",3,"click"],[2,"--background","red",3,"click"],["class","atuar",4,"ngIf"],["class","atuado borda-vermelha","style","align-items: center;",4,"ngIf"],["class","atuado",4,"ngIf"],[1,"table-container"],["class","proposta-status-card",4,"ngFor","ngForOf"],["class","fundo-modal",4,"ngIf"],[1,"atuar"],[3,"click"],[1,"atuado","borda-vermelha",2,"align-items","center"],[1,"mensagem-aviso"],[1,"atuado"],[1,"camera-container",2,"display","flex","justify-content","center","flex-direction","column","align-items","center"],[3,"click",4,"ngIf"],["lines","none"],["label","Tipo do Anexo","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],[1,"last-line"],["slot","start","name","camera-outline"],["name","trash-outline",2,"color","red","font-size","1.5em",3,"click"],[1,"proposta-status-card"],[2,"white-space","pre-line","text-align","start","line-height","35px",3,"innerHTML"],[2,"display","flex","align-items","center","justify-content","flex-end"],["name","eye-outline",2,"cursor","pointer","color","#004977","font-size","2.2em",3,"click"],[1,"fundo-modal"],[1,"janela-modal"],[1,"modal-header"],["name","close-outline",3,"click"],[2,"text-align","center"],["label","Tipo de Recebimento","labelPlacement","floating","fill","outline",3,"ngModelChange","ionChange","ngModel"],["value","pix"],["value","banco"],["labelPlacement","end",2,"color","#004977",3,"ngModelChange","ngModel"],["expand","block",3,"click"],["label","Tipo Chave PIX","labelPlacement","floating","fill","outline",3,"ionChange","ngModelChange","ngModel"],["value","cpf"],["value","cnpj"],["value","email"],["value","telefone"],["value","aleatoria"],["label","Chave PIX","labelPlacement","floating","fill","outline",3,"ngModelChange","ionInput","ionBlur","ngModel"],["label","Banco","labelPlacement","floating","fill","outline","placeholder","Digite para buscar","autocomplete","off",3,"ngModelChange","ionInput","ionFocus","blur","ngModel"],["class","lista-bancos",4,"ngIf"],["label","Ag\xeancia","maxlength","6","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"],["label","Conta","maxlength","12","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"],["label","D\xedgito","maxlength","2","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"],["label","Tipo Conta","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"],["value","corrente"],["value","poupanca"],[1,"lista-bancos"],["class","item-banco",3,"mousedown",4,"ngFor","ngForOf"],[1,"item-banco",3,"mousedown"],[2,"margin-top","10px",3,"ngModelChange","ngModel"],["slot","start","value","pf",2,"--color","#004977"],["slot","start","value","pj",2,"--color","#004977"],["label","Nome do Terceiro","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"],["label","CPF do Terceiro","labelPlacement","floating","fill","outline","maxlength","14",3,"ngModelChange","ionInput","ngModel"],["label","Parentesco","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"],["value","pai_mae"],["value","avo"],["value","filho"],["value","irmao"],["value","conjuge"],["value","outros"],["label","Informe o Parentesco","labelPlacement","floating","fill","outline",3,"ngModel","ngModelChange",4,"ngIf"],["label","Informe o Parentesco","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"],["label","Raz\xe3o Social","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"],["label","CNPJ","labelPlacement","floating","fill","outline","maxlength","18",3,"ngModelChange","ionInput","ionBlur","ngModel"],["label","V\xednculo com a Empresa","labelPlacement","floating","fill","outline",3,"ngModelChange","ngModel"]],template:function(t,e){1&t&&(o.j41(0,"ion-content",0)(1,"div",1)(2,"ion-icon",2),o.bIt("click",function(){return e.navigation("propostas")}),o.k0s(),o.j41(3,"h1"),o.EFF(4,"Visualizar Propostas"),o.k0s()(),o.DNE(5,w,63,15,"main",3),o.k0s()),2&t&&(o.Y8G("fullscreen",!0)("scrollY",!e.mostrarModal),o.R7$(5),o.Y8G("ngIf",e.propsStatus))},dependencies:[g.Sq,g.bT,m.BC,m.tU,m.vS,c.Jm,c.b_,c.I9,c.ME,c.tN,c.W9,c.iq,c.$w,c.uz,c.he,c.KO,c.f0,c.Nm,c.Ip,c.BY,c.hB,c.Je,c.Gw,g.Pc,g.vh],styles:["body.modal-open[_ngcontent-%COMP%]{overflow:hidden;touch-action:none}.pageView_propostas[_ngcontent-%COMP%]{--background: #efeef4}.topo-view_propostas[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;position:relative;padding:20px 20px 0;background:#f89b24;height:70px;color:#fff}.topo-view_propostas[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);margin:0;font-size:1.2em}.icone-voltar[_ngcontent-%COMP%]{font-size:1.5em;color:#fff}main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:15px;flex-direction:column}.date-list[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;width:90%}.proposta-card[_ngcontent-%COMP%]{--background: #fff;border-radius:20px;border-left:3px solid #004977;border-right:3px solid #004977}.proposta-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{margin-top:20px;color:#004977;display:flex;flex-direction:column;gap:10px}.proposta-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.buttons-container[_ngcontent-%COMP%]{display:flex}.buttons-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:#fff;--border-radius: 10px}.atuar[_ngcontent-%COMP%]{display:flex}.atuar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #004977;color:#fff;font-size:1.5em;--border-radius: 10px}.atuado[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;width:80%;background:#fff;border-left:3px solid #004977;border-right:3px solid #004977;border-radius:10px;padding:20px 10px}.atuado[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent}.atuado[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #004977;color:#004977;padding:15px;border-radius:10px}.atuado[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:15px 10px;border:1px solid #004977;width:80%;font-style:italic;border-radius:10px;gap:20px;margin-top:10px;text-align:center;color:#555}ion-select[_ngcontent-%COMP%]{width:80%;--border-radius: 10px;--placeholder-color: #004977;--placeholder-opacity: 1;--border-color: #004977;--border-color-focused: #004977}ion-select[_ngcontent-%COMP%]::part(label){color:#004977}ion-select[_ngcontent-%COMP%]::part(text){color:#004977}ion-select[_ngcontent-%COMP%]::part(icon){color:#004977;opacity:1}.atuado[_ngcontent-%COMP%]   .last-line[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center}.atuado[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #004977;color:#fff;font-size:1.3em;--border-radius: 10px}.atuado[_ngcontent-%COMP%]   .last-line[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: #004977;color:#fff}.atuado[_ngcontent-%COMP%]   .last-line[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#004977}.borda-vermelha[_ngcontent-%COMP%]{border-left:3px solid red;border-right:3px solid red;background-color:#fff}.mensagem-aviso[_ngcontent-%COMP%]{color:#004977;font-weight:700;text-align:center;margin-bottom:10px;display:flex;flex-wrap:wrap;align-items:center;gap:8px;justify-content:center}.table-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:80%;gap:10px}.proposta-status-card[_ngcontent-%COMP%]{--background: #fff;border-radius:10px;width:100%;margin:10px auto}.proposta-status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{color:#004977;display:flex;width:90%;flex-direction:column;gap:10px}.proposta-status-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:end;font-size:18px}.fundo-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0009;display:flex;align-items:center;justify-content:center;z-index:9999}.janela-modal[_ngcontent-%COMP%]{background:#fff;padding:20px;border-radius:10px;overflow-y:auto;max-height:70vh;width:90%;display:flex;flex-direction:column;gap:20px;max-width:400px;box-shadow:0 2px 10px #0006}.janela-modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#004977;margin-top:5px}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center}.modal-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.5em;color:#004977}.janela-modal[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], .janela-modal[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%]{width:100%;--border-radius: 10px;--border-color: #004977;color:#004977}.borda-vermelha-input[_ngcontent-%COMP%]{--border-color: red !important;--box-shadow: 0 0 5px red !important}.janela-modal[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:flex;align-self:center;--background: #004977;color:#fff;max-width:150px;--border-radius: 10px}.janela-modal[_ngcontent-%COMP%]   .lista-bancos[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;background:#fff;max-height:200px;min-height:150px;border:1px solid #004977;border-radius:10px;color:#004977;padding:10px;overflow-y:auto}.janela-modal[_ngcontent-%COMP%]   .radio-group-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row}.janela-modal[_ngcontent-%COMP%]   ion-radio-group[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;color:#004977}"]}),s})()}];let J=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[x.iI.forChild(L),x.iI]}),s})(),z=(()=>{var i;class s{}return(i=s).\u0275fac=function(t){return new(t||i)},i.\u0275mod=o.$C({type:i}),i.\u0275inj=o.G2t({imports:[g.MD,m.YN,c.bv,J]}),s})()}}]);