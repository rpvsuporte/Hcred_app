"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3733],{3733:(S,d,a)=>{a.r(d),a.d(d,{VerifyCodePageModule:()=>y});var h=a(2881),g=a(4341),c=a(9420),u=a(5207),p=a(6480),e=a(1360),f=a(3366),m=a(8397),C=a(9260);const v=[{path:"",component:(()=>{var i;class s{constructor(o,t,n){this.apiService=o,this.toastService=t,this.navigationService=n,this.codigoDigitado="",this.parte1="",this.parte2="",this.isLoading=!1,this.erro=!1,this.email=localStorage.getItem("email")||"",this.telefone=localStorage.getItem("telefone")||""}ngOnInit(){}onPrimeiraParte(){3===this.parte1.length&&document.querySelectorAll("ion-input-otp")[1].setFocus(),this.atualizaCodigoDigitado()}onSegundaParte(){this.atualizaCodigoDigitado()}atualizaCodigoDigitado(){this.codigoDigitado=`${this.parte1}${this.parte2?"-"+this.parte2:""}`,3===this.parte1.length&&3===this.parte2.length&&this.verificarCodigo()}verificarCodigo(){if(7!==this.codigoDigitado.length)return;this.isLoading=!0;const o={auth_hash:p.k,type:"email",idUser:localStorage.getItem("idLogado"),codigo:this.codigoDigitado.toUpperCase()};this.apiService.verificarCodigo(o).subscribe({next:t=>{this.isLoading=!1,"true"!==localStorage.getItem("resetSenha")?"success"===t.estatus?(this.erro=!1,this.toastService.success("C\xf3digo verificado com sucesso!"),localStorage.removeItem("email"),localStorage.setItem("emailValidado","true"),this.navigation("auth-celular")):(this.erro=!0,this.toastService.warning(t.mensagem||"C\xf3digo inv\xe1lido")):(localStorage.removeItem("resetSenha"),this.navigation("atualizar-senha"))},error:()=>{this.isLoading=!1,this.erro=!0,this.toastService.error("Erro ao se comunicar com o servidor")}})}mascararEmail(o){if(!o)return"";const[t,n]=o.split("@");return t&&n?`${t.slice(0,2)}${"*".repeat(Math.max(t.length-2,3))}@${n}`:o}reenviarCodigo(o){o.preventDefault(),this.isLoading=!0;const t={auth_hash:p.k,email:this.email,type:"email",idUser:localStorage.getItem("idLogado")};this.apiService.gerarCode(t).subscribe({next:n=>{"success"===n.estatus?this.toastService.success(n.mensagem):this.toastService.warning(n.mensagem||"Erro ao gerar c\xf3digo"),this.isLoading=!1},error:()=>{this.toastService.error("Erro na comunica\xe7\xe3o com o servidor."),this.isLoading=!1}})}navigation(o){this.navigationService.navigate(o)}voltar(){"true"===localStorage.getItem("resetSenha")?this.navigation("choose-verify"):this.navigation("auth-email")}}return(i=s).\u0275fac=function(o){return new(o||i)(e.rXU(f.G),e.rXU(m.f),e.rXU(C.o))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-verify-code"]],standalone:!1,decls:20,vars:3,consts:[["fill","clear",1,"back-button",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"otp-container"],["name","lock-open-outline"],[1,"otp-wrapper"],["type","text","size","small","length","3",2,"--border-color","#004977","--border-width","1px",3,"ngModelChange","ionInput","ngModel"],[1,"hyphen"],["type","text","length","3","size","small",2,"--border-color","#004977","--border-width","1px",3,"ngModelChange","ionInput","ngModel"],[1,"resend"],["href","#",3,"click"]],template:function(o,t){1&o&&(e.j41(0,"ion-content")(1,"ion-button",0),e.bIt("click",function(){return t.voltar()}),e.nrm(2,"ion-icon",1),e.k0s(),e.j41(3,"div",2),e.nrm(4,"ion-icon",3),e.j41(5,"h2"),e.EFF(6,"Verifica\xe7\xe3o de C\xf3digo"),e.k0s(),e.j41(7,"p"),e.EFF(8,"Por favor informe o c\xf3digo de autentica\xe7\xe3o de 6 d\xedgitos que enviamos para o e-mail "),e.j41(9,"strong"),e.EFF(10),e.k0s()(),e.j41(11,"div",4)(12,"ion-input-otp",5),e.mxI("ngModelChange",function(r){return e.DH7(t.parte1,r)||(t.parte1=r),r}),e.bIt("ionInput",function(){return t.onPrimeiraParte()}),e.k0s(),e.j41(13,"span",6),e.EFF(14,"-"),e.k0s(),e.j41(15,"ion-input-otp",7),e.mxI("ngModelChange",function(r){return e.DH7(t.parte2,r)||(t.parte2=r),r}),e.bIt("ionInput",function(){return t.onSegundaParte()}),e.k0s()(),e.j41(16,"p",8),e.EFF(17," N\xe3o recebeu o c\xf3digo? "),e.j41(18,"a",9),e.bIt("click",function(r){return t.reenviarCodigo(r)}),e.EFF(19,"Reenviar o c\xf3digo"),e.k0s()()()()),2&o&&(e.R7$(10),e.SpI("",t.mascararEmail(t.email),"."),e.R7$(2),e.R50("ngModel",t.parte1),e.R7$(3),e.R50("ngModel",t.parte2))},dependencies:[g.BC,g.vS,c.Jm,c.W9,c.iq,c.UR,c.Gw],styles:["ion-content[_ngcontent-%COMP%]{--background: #efeef4}.otp-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:15px;min-height:100vh;margin:0 auto;width:80%}.otp-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2em;color:#004977}.otp-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#004977;text-align:center}.otp-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#004977;text-align:center;text-indent:10px}.otp-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;justify-content:center}.hyphen[_ngcontent-%COMP%]{font-size:24px;font-weight:400;color:#004977}ion-input-otp[_ngcontent-%COMP%]{width:180px;text-transform:uppercase;--color: #004977}ion-input-otp.erro[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:red}ion-input-otp.sucesso[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:green}.resend[_ngcontent-%COMP%]{margin-top:20px;font-size:14px}.resend[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#004977}.back-button[_ngcontent-%COMP%]{position:absolute;top:calc(env(safe-area-inset-top) + 15px);left:15px;z-index:100;--padding-start: 0;--padding-end: 0;--background: transparent;--color: #004977;font-size:1.2em}"]}),s})()}];let P=(()=>{var i;class s{}return(i=s).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.iI.forChild(v),u.iI]}),s})(),y=(()=>{var i;class s{}return(i=s).\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[h.MD,g.YN,c.bv,P]}),s})()}}]);