"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6967],{6967:(_,u,r)=>{r.r(u),r.d(u,{VerifyCodePageModule:()=>x});var P=r(2881),g=r(4341),c=r(9420),p=r(5207),f=r(467),h=r(6480),e=r(1360),y=r(9885),M=r(3366),S=r(8397),I=r(9260);const V=[{path:"",component:(()=>{var n;class s{constructor(t,o,a,i){this.userService=t,this.apiService=o,this.toastService=a,this.navigationService=i,this.codigoDigitado="",this.parte1="",this.parte2="",this.isLoading=!1,this.erro=!1,this.telefone=localStorage.getItem("telefone")||""}ngOnInit(){}onPrimeiraParte(){3===this.parte1.length&&document.querySelectorAll("ion-input-otp")[1].setFocus(),this.atualizaCodigoDigitado()}onSegundaParte(){this.atualizaCodigoDigitado()}atualizaCodigoDigitado(){this.codigoDigitado=`${this.parte1}${this.parte2?"-"+this.parte2:""}`,3===this.parte1.length&&3===this.parte2.length&&this.verificarCodigo()}verificarCodigo(){var t=this;return(0,f.A)(function*(){if(7!==t.codigoDigitado.length)return;t.isLoading=!0;const o={auth_hash:h.k,idUser:localStorage.getItem("idLogado"),type:"telefone",codigo:t.codigoDigitado.toUpperCase()};var a;t.apiService.verificarCodigo(o).subscribe({next:(a=(0,f.A)(function*(i){if(t.isLoading=!1,"true"!==localStorage.getItem("resetSenha"))if("success"===i.estatus){t.toastService.success("C\xf3digo verificado com sucesso!");const d=localStorage.getItem("usuarioParcial"),F=localStorage.getItem("senhaParcial"),m=yield t.userService.login(d,F);m.dados&&Object.entries(m.dados).forEach(([v,C])=>{"senhaAcesso"!==v&&localStorage.setItem(v,null!=C?String(C):"")}),yield t.userService.buscarSaldo(),localStorage.removeItem("usuarioParcial"),localStorage.removeItem("senhaParcial"),localStorage.removeItem("telefone"),localStorage.removeItem("emailValidado"),t.navigation("index")}else t.toastService.warning(i.mensagem||"C\xf3digo inv\xe1lido");else localStorage.removeItem("resetSenha"),t.navigation("atualizar-senha")}),function(d){return a.apply(this,arguments)}),error:()=>{t.isLoading=!1,t.toastService.error("Erro ao se comunicar com o servidor")}})})()}reenviarCodigo(t){t.preventDefault(),this.isLoading=!0;const o={auth_hash:h.k,telefone:this.telefone,type:"telefone",idUser:localStorage.getItem("idLogado")};this.apiService.gerarCode(o).subscribe({next:a=>{"success"===a.estatus?this.toastService.success(a.mensagem):this.toastService.warning(a.mensagem||"Erro ao gerar c\xf3digo"),this.isLoading=!1},error:()=>{this.toastService.error("Erro na comunica\xe7\xe3o com o servidor."),this.isLoading=!1}})}mascararTelefone(t){if(!t)return"";const o=t.replace(/\D/g,"");return o.length<8?t:`(${o.slice(0,2)}) ${o.slice(2,-4)}-0000`}navigation(t){this.navigationService.navigate(t)}voltar(){"true"===localStorage.getItem("resetSenha")?this.navigation("choose-verify"):this.navigation("auth-celular")}}return(n=s).\u0275fac=function(t){return new(t||n)(e.rXU(y.D),e.rXU(M.G),e.rXU(S.f),e.rXU(I.o))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-verify-code"]],standalone:!1,decls:20,vars:3,consts:[["fill","clear",1,"back-button",3,"click"],["slot","icon-only","name","arrow-back-outline"],[1,"otp-container"],["name","lock-open-outline"],[1,"otp-wrapper"],["type","text","size","small","length","3",2,"--border-color","#004977","--border-width","1px",3,"ngModelChange","ionInput","ngModel"],[1,"hyphen"],["type","text","length","3","size","small",2,"--border-color","#004977","--border-width","1px",3,"ngModelChange","ionInput","ngModel"],[1,"resend"],["href","#",3,"click"]],template:function(t,o){1&t&&(e.j41(0,"ion-content")(1,"ion-button",0),e.bIt("click",function(){return o.voltar()}),e.nrm(2,"ion-icon",1),e.k0s(),e.j41(3,"div",2),e.nrm(4,"ion-icon",3),e.j41(5,"h2"),e.EFF(6,"Verifica\xe7\xe3o de C\xf3digo"),e.k0s(),e.j41(7,"p"),e.EFF(8," Por favor informe o c\xf3digo de autentica\xe7\xe3o de 6 d\xedgitos que enviamos para o telefone "),e.j41(9,"strong"),e.EFF(10),e.k0s()(),e.j41(11,"div",4)(12,"ion-input-otp",5),e.mxI("ngModelChange",function(i){return e.DH7(o.parte1,i)||(o.parte1=i),i}),e.bIt("ionInput",function(){return o.onPrimeiraParte()}),e.k0s(),e.j41(13,"span",6),e.EFF(14,"-"),e.k0s(),e.j41(15,"ion-input-otp",7),e.mxI("ngModelChange",function(i){return e.DH7(o.parte2,i)||(o.parte2=i),i}),e.bIt("ionInput",function(){return o.onSegundaParte()}),e.k0s()(),e.j41(16,"p",8),e.EFF(17," N\xe3o recebeu o c\xf3digo? "),e.j41(18,"a",9),e.bIt("click",function(i){return o.reenviarCodigo(i)}),e.EFF(19,"Reenviar o c\xf3digo"),e.k0s()()()()),2&t&&(e.R7$(10),e.SpI("+55 ",o.mascararTelefone(o.telefone),"."),e.R7$(2),e.R50("ngModel",o.parte1),e.R7$(3),e.R50("ngModel",o.parte2))},dependencies:[g.BC,g.vS,c.Jm,c.W9,c.iq,c.UR,c.Gw],styles:["ion-content[_ngcontent-%COMP%]{--background: #efeef4}.otp-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:15px;min-height:100vh;margin:0 auto;width:80%}.otp-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2em;color:#004977}.otp-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#004977;text-align:center}.otp-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#004977;text-align:center;text-indent:10px}.otp-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;justify-content:center}.hyphen[_ngcontent-%COMP%]{font-size:24px;font-weight:400;color:#004977}ion-input-otp[_ngcontent-%COMP%]{width:180px;text-transform:uppercase;--color: #004977}ion-input-otp.erro[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:red}ion-input-otp.sucesso[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:green}.resend[_ngcontent-%COMP%]{margin-top:20px;font-size:14px}.resend[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#004977}.back-button[_ngcontent-%COMP%]{position:absolute;top:calc(env(safe-area-inset-top) + 15px);left:15px;z-index:100;--padding-start: 0;--padding-end: 0;--background: transparent;--color: #004977;font-size:1.2em}"]}),s})()}];let O=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[p.iI.forChild(V),p.iI]}),s})(),x=(()=>{var n;class s{}return(n=s).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[P.MD,g.YN,c.bv,O]}),s})()}}]);